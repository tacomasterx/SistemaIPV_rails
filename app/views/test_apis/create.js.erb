<% if @test_api.errors.any? %>
    <%# NOTE COMMENT STEP 4: This removes any error messages that were previously generated. %>
    document.querySelector('#error_explanation') ? document.querySelector('#error_explanation').remove() : null ;
    <%# NOTE COMMENT STEP 4: This selects the `<form>` in `app/views/posts/show.html.erb` and dynamically injects the `app/views/shared/_validation-messages.html.erb` partial. %>
    document.querySelector('#test-api-form').insertAdjacentHTML('afterbegin', '<%= escape_javascript(render "partials/validation-messages", object: @test_api) %>');
  <% else %>
        <%# NOTE COMMENT STEP 4: This removes any error messages that were previously generated. %>
        document.querySelector('#error_explanation') ? document.querySelector('#error_explanation').remove() : null ;
        <%# NOTE COMMENT STEP 4: This selects `<div id="comments">` in `app/views/posts/show.html.erb` and dynamically injects the `app/views/comments/_comment.html.erb` partial. %>

        fetch('https://jsonplaceholder.typicode.com/posts', {
              method: 'POST',
              body: readJson(),
              headers: {
                'Content-type': 'application/json; charset=UTF-8',
              },
            })
              .then((response) => response.json())
              .then((json) => console.log(json));


        <%# NOTE COMMENT STEP 4: This selects the `<form>` in `app/views/posts/show.html.erb` and resets the text area. %>
        //document.querySelector('#test-api-form').reset();
<% end %>


function readJson(){
  return JSON.stringify({
    title: document.getElementById('test_api_title').value ,
    body: document.getElementById('test_api_body').value ,
    userId: parseInt(document.getElementById('test_api_userId').value)
  });
  //document.getElementById('test_api_fakeId').value
}
